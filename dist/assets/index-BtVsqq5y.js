var h=n=>{throw TypeError(n)};var p=(n,t,e)=>t.has(n)||h("Cannot "+e);var u=(n,t,e)=>(p(n,t,"read from private field"),e?e.call(n):t.get(n)),f=(n,t,e)=>t.has(n)?h("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),g=(n,t,e,r)=>(p(n,t,"write to private field"),r?r.call(n,e):t.set(n,e),e);var m=(n,t,e)=>new Promise((r,s)=>{var i=a=>{try{c(e.next(a))}catch(d){s(d)}},o=a=>{try{c(e.throw(a))}catch(d){s(d)}},c=a=>a.done?r(a.value):Promise.resolve(a.value).then(i,o);c((e=e.apply(n,t)).next())});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();function y(n){return/^([\x30-\x39]|[\x61-\x7a])$/i.test(n)}function w(n){return/^[a-zA-Z]+$/.test(n)}class b{constructor(t){this.form=this.generationForm(),this.game=t,this.changeFocus(),this.answerVerify()}generationForm(){const t=document.querySelector("main.board"),e=document.createElement("form");e.classList.add("row"),e.id="row-0",e.setAttribute("inert","");const r=document.createElement("input");r.classList.add("letter"),r.type="text",r.name="letter-0",r.id="row-0--0",r.maxLength="1";const s=document.createElement("input");s.classList.add("letter"),s.type="text",s.name="letter-1",s.id="row-0--1",s.maxLength="1";const i=document.createElement("input");i.classList.add("letter"),i.type="text",i.name="letter-2",i.id="row-0--2",i.maxLength="1";const o=document.createElement("input");o.classList.add("letter"),o.type="text",o.name="letter-3",o.id="row-0--3",o.maxLength="1";const c=document.createElement("input");c.classList.add("letter"),c.type="text",c.name="letter-4",c.id="row-0--4",c.maxLength="1";const a=document.createElement("input");return a.type="submit",a.setAttribute("hidden",""),e.appendChild(r),e.appendChild(s),e.appendChild(i),e.appendChild(o),e.appendChild(c),e.appendChild(a),t.appendChild(e),e}activationForm(){this.form.removeAttribute("inert"),this.form[0].focus()}changeFocus(){this.form.addEventListener("keyup",function(t){t.target.tagName==="INPUT"&&y(t.target.value)&&t.target.nextElementSibling.type!="submit"&&(t.target.blur(),t.target.nextElementSibling.focus())})}answerVerify(){return m(this,null,function*(){this.form.addEventListener("submit",t=>m(this,null,function*(){t.preventDefault();const e=new FormData(this.form);let r="";e.values();for(var s of e.values())r+=s;if(r.length<5)this.game.displayMessage(`${r} n'a pas 5 lettre`);else if(w(r)){this.game.displayMessage(`Votre réponse est ${r}`);const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guess:r})},a=yield(yield fetch("https://progweb-wwwordle-api.onrender.com/guess",o)).json();a.message==="Not quite! Keep trying!"&&a.status==="valid"?(this.colorChange(a),this.game.changeAnswer()):a.status==="valid"&&a.message==="Congratulations! You found the word!"?(this.game.displayMessage("Congratulations! You found the word!"),this.colorChange(a)):this.game.displayMessage("This word is not in English !")}else this.game.displayMessage(`${r} n'est pas seulement alphabétique`)}))})}colorChange(t){for(let e=0;e<=4;e++)t.feedback[e].status==="correct"?this.form[e].style.backgroundColor="green":t.feedback[e].status==="present"?this.form[e].style.backgroundColor="yellow":t.feedback[e].status==="absent"&&(this.form[e].style.backgroundColor="grey")}}var l;class v{constructor(t){f(this,l,0);this.nbrTentative=t,this.anserTab=[],this.creationAnswer()}creationAnswer(){for(let t=0;t<=this.nbrTentative-1;t++){let e=new b(this);this.anserTab.push(e)}this.anserTab[0].activationForm()}changeAnswer(){u(this,l)==4?this.displayMessage("Game over"):(this.anserTab[u(this,l)].form.setAttribute("inert",""),this.anserTab[u(this,l)+1].activationForm(),g(this,l,u(this,l)+1))}displayMessage(t){document.querySelector(".message").textContent=t}}l=new WeakMap;new v(5);
